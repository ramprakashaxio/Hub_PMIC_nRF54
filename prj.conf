# =============================================================================
# Zephyr Project Configuration for MAX77658 PMIC Driver
# Target: nRF5340 / nRF52840
# =============================================================================

# -----------------------------------------------------------------------------
# Clock Configuration
# -----------------------------------------------------------------------------
# Use internal 32.768 kHz RC oscillator (LFRC) instead of external crystal (LFXO)
# This frees P0.00 (XL1) and P0.01 (XL2) for GPIO use
CONFIG_CLOCK_CONTROL_NRF_K32SRC_RC=y
CONFIG_CLOCK_CONTROL_NRF_K32SRC_RC_CALIBRATION=y

# -----------------------------------------------------------------------------
# C++ Support (if needed for driver library)
# -----------------------------------------------------------------------------
CONFIG_CPP=y
CONFIG_STD_CPP17=y
CONFIG_REQUIRES_FULL_LIBCPP=y
CONFIG_NEWLIB_LIBC=y

# -----------------------------------------------------------------------------
# I2C Configuration
# -----------------------------------------------------------------------------
CONFIG_I2C=y

# -----------------------------------------------------------------------------
# SPI Configuration (for other peripherals like MAX30001G ECG/BioZ AFE)
# -----------------------------------------------------------------------------
CONFIG_SPI=y

# -----------------------------------------------------------------------------
# GPIO Configuration
# -----------------------------------------------------------------------------
CONFIG_GPIO=y

# -----------------------------------------------------------------------------
# Serial / UART Console Configuration
# -----------------------------------------------------------------------------
CONFIG_SERIAL=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_BUFFER_SIZE=2048
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_BACKEND_UART=y
CONFIG_PRINTK=y

# Enable floating point support for printf/LOG_INF
CONFIG_CBPRINTF_FP_SUPPORT=y

# -----------------------------------------------------------------------------
# PMIC MAX77658 Configuration
# -----------------------------------------------------------------------------
CONFIG_PMIC_MAX77658=y
CONFIG_PMIC_MAX77658_LOG_LEVEL=3
CONFIG_PMIC_MAX77658_PM=y
CONFIG_PMIC_MAX77658_FG=y

# Fuel Gauge Battery Configuration
CONFIG_PMIC_MAX77658_FG_DESIGN_CAP=350
CONFIG_PMIC_MAX77658_FG_RSENSE=10

# -----------------------------------------------------------------------------
# Memory Configuration
# -----------------------------------------------------------------------------
# Heap for dynamic allocation
CONFIG_HEAP_MEM_POOL_SIZE=16384

# Main stack size (increase if needed)
CONFIG_MAIN_STACK_SIZE=4096

# -----------------------------------------------------------------------------
# Debug Configuration (optional - disable for production)
# -----------------------------------------------------------------------------
# CONFIG_DEBUG=y
# CONFIG_DEBUG_OPTIMIZATIONS=y
# CONFIG_DEBUG_THREAD_INFO=y

